<!DOCTYPE html>
<html lang="ko">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>ë¡œê·¸ì¸ - WorkBoard</title>
    <!-- Bootstrap CSS -->
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <style>
      /* register.htmlê³¼ ë™ì¼í•œ ìŠ¤íƒ€ì¼ */
      .gradient-bg {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
      }
      .footer {
        background-color: #343a40;
        color: white;
        padding: 20px 0;
      }
      /* Sticky footer ì„¤ì • */
      html,
      body {
        height: 100%;
      }
      body {
        display: flex;
        flex-direction: column;
      }
      .container-wrapper {
        flex: 1;
      }
      /* ì¶”ê°€ ìŠ¤íƒ€ì¼ */
      .login-card {
        max-width: 400px;
        margin: 0 auto;
      }
      .vulnerability-warning {
        border: 2px dashed #dc3545;
        background-color: #f8d7da;
        color: #721c24;
        padding: 15px;
        border-radius: 8px;
        margin-bottom: 20px;
      }
      /* ì•Œë¦¼ ë©”ì‹œì§€ ìŠ¤íƒ€ì¼ ê°œì„  */
      #alertContainer {
        position: relative;
        z-index: 1000;
      }

      #alertContainer .alert {
        box-shadow: 0 4px 12px rgba(0, 0, 0, 0.15);
        border: none;
        font-weight: 500;
      }

      /* ì•Œë¦¼ íƒ€ì…ë³„ ìƒ‰ìƒ ê°•í™” */
      .alert-success {
        background-color: #d1e7dd;
        color: #0a3622;
        border-left: 4px solid #198754;
      }

      .alert-danger {
        background-color: #f8d7da;
        color: #58151c;
        border-left: 4px solid #dc3545;
      }

      .alert-warning {
        background-color: #fff3cd;
        color: #664d03;
        border-left: 4px solid #ffc107;
      }

      .alert-info {
        background-color: #cff4fc;
        color: #055160;
        border-left: 4px solid #0dcaf0;
      }
    </style>
  </head>
  <body class="bg-light">
    <!-- ì·¨ì•½í•œ ë²„ì „ í‘œì‹œ ë°°ë„ˆ -->
    <div
      class="alert alert-danger mb-0 text-center border-0"
      style="border-radius: 0"
    >
      <strong>âš ï¸ ì·¨ì•½ì  í¬í•¨ ë²„ì „</strong> - ì˜ë„ì ì¸ ë³´ì•ˆ ì·¨ì•½ì  í¬í•¨ë¨
    </div>

    <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
    <nav class="navbar navbar-dark gradient-bg shadow-sm">
      <div class="container">
        <a class="navbar-brand fs-4 fw-bold" href="index.html">ğŸ¢ WorkBoard</a>
        <div>
          <a href="register.html" class="btn btn-light me-2">íšŒì›ê°€ì…</a>
          <a href="index.html" class="btn btn-outline-light">í™ˆìœ¼ë¡œ</a>
        </div>
      </div>
    </nav>

    <!-- ë¡œê·¸ì¸ í¼ -->
    <div class="container-wrapper">
      <!-- ìƒë‹¨ ê³ ì • ì•Œë¦¼ ì˜ì—­ -->
      <div id="alertContainer" class="container mt-3">
        <!-- ì•Œë¦¼ì´ ì—¬ê¸°ì— í‘œì‹œë©ë‹ˆë‹¤ -->
      </div>

      <div class="container mt-4">
        <div class="row justify-content-center">
          <div class="col-md-6">
            <!-- ì·¨ì•½ì  ê²½ê³  (ê°œë°œ/í•™ìŠµìš©) -->
            <div class="vulnerability-warning">
              <h6>
                <i class="bi bi-exclamation-triangle"></i> ë³´ì•ˆ ì·¨ì•½ì  ë²„ì „
              </h6>
              <small
                >ì´ ë¡œê·¸ì¸ ì‹œìŠ¤í…œì€
                <strong>ì˜ë„ì ìœ¼ë¡œ NoSQL Injection ì·¨ì•½ì </strong>ì„ í¬í•¨í•˜ê³ 
                ìˆìŠµë‹ˆë‹¤.<br />
              </small>
            </div>

            <div class="card shadow login-card">
              <div class="card-header gradient-bg text-white text-center">
                <h3 class="mb-0">ğŸ” ë¡œê·¸ì¸</h3>
                <p class="mb-0 mt-2">WorkBoardì— ë¡œê·¸ì¸í•˜ì„¸ìš”</p>
              </div>
              <div class="card-body p-4">
                <!-- ë¡œê·¸ì¸ í¼ -->
                <form id="loginForm">
                  <!-- ì´ë©”ì¼ ì…ë ¥ -->
                  <div class="mb-3">
                    <label for="email" class="form-label">
                      <i class="bi bi-envelope"></i> ì´ë©”ì¼
                    </label>
                    <input
                      type="email"
                      class="form-control"
                      id="email"
                      name="email"
                      placeholder="your@company.com"
                      required
                    />
                  </div>

                  <!-- ë¹„ë°€ë²ˆí˜¸ ì…ë ¥ -->
                  <div class="mb-4">
                    <label for="password" class="form-label">
                      <i class="bi bi-lock"></i> ë¹„ë°€ë²ˆí˜¸
                    </label>
                    <input
                      type="password"
                      class="form-control"
                      id="password"
                      name="password"
                      placeholder="ë¹„ë°€ë²ˆí˜¸ ì…ë ¥"
                      required
                    />
                  </div>

                  <!-- ì œì¶œ ë²„íŠ¼ -->
                  <div class="d-grid mb-3">
                    <button
                      type="submit"
                      class="btn btn-primary btn-lg"
                      id="loginBtn"
                    >
                      <span id="loginText">ğŸš€ ë¡œê·¸ì¸</span>
                      <span
                        id="loadingSpinner"
                        class="spinner-border spinner-border-sm d-none"
                        role="status"
                      >
                        <span class="visually-hidden">ì²˜ë¦¬ì¤‘...</span>
                      </span>
                    </button>
                  </div>
                </form>

                <!-- íšŒì›ê°€ì… ë§í¬ -->
                <div class="text-center">
                  <p class="mb-0">
                    ê³„ì •ì´ ì—†ìœ¼ì‹ ê°€ìš”?
                    <a href="register.html" class="text-decoration-none"
                      >íšŒì›ê°€ì…í•˜ê¸°</a
                    >
                  </p>
                </div>

                <!-- ê°œë°œìš© ë¡œê·¸ì•„ì›ƒ ë²„íŠ¼ -->
                <div class="text-center mt-2">
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-danger"
                    onclick="clearLogin()"
                  >
                    ğŸ”„ ë¡œê·¸ì¸ ìƒíƒœ ì´ˆê¸°í™”
                  </button>
                  <button
                    type="button"
                    class="btn btn-sm btn-outline-warning ms-2"
                    onclick="resetDatabase()"
                  >
                    ğŸ—‘ï¸ ë°ì´í„°ë² ì´ìŠ¤ ì´ˆê¸°í™” (ê°œë°œìš©)
                  </button>
                </div>

                <!-- NoSQL Injection í•™ìŠµ ê°€ì´ë“œ -->
                <div class="mt-4 p-3 bg-light rounded">
                  <h6 class="text-danger">
                    <i class="bi bi-shield-exclamation"></i> NoSQL Injection
                    ì·¨ì•½ì  í•™ìŠµ
                  </h6>

                  <!-- ì·¨ì•½ì  ê°œë… ì„¤ëª… -->
                  <div class="mb-3 p-2 bg-info bg-opacity-10 rounded">
                    <h6 class="small text-primary">
                      <i class="bi bi-book"></i> NoSQL Injectionì´ë€?
                    </h6>
                    <div class="small">
                      <p class="mb-1">
                        <strong>ì •ì˜:</strong> ì‚¬ìš©ì ì…ë ¥ì„ ê²€ì¦ ì—†ì´ NoSQL
                        ë°ì´í„°ë² ì´ìŠ¤ ì¿¼ë¦¬ì— ì‚½ì…í•  ë•Œ ë°œìƒí•˜ëŠ” ë³´ì•ˆ ì·¨ì•½ì 
                      </p>
                      <p class="mb-1">
                        <strong>ìœ„í—˜ì„±:</strong> ì¸ì¦ ìš°íšŒ, ë°ì´í„° ìœ ì¶œ, ê¶Œí•œ
                        ìƒìŠ¹ ë“±ì´ ê°€ëŠ¥
                      </p>
                      <p class="mb-0">
                        <strong>OWASP Top 10:</strong> A03 - Injection
                        ì¹´í…Œê³ ë¦¬ì— í¬í•¨
                      </p>
                    </div>
                  </div>

                  <!-- ê³µê²© ì›ë¦¬ ìƒì„¸ ì„¤ëª… -->
                  <div class="mb-3 p-2 bg-warning bg-opacity-10 rounded">
                    <h6 class="small text-warning">
                      <i class="bi bi-lightbulb"></i> ê³µê²© ì›ë¦¬
                    </h6>
                    <div class="small">
                      <div class="mb-2">
                        <strong>ğŸŸ¢ ì •ìƒì ì¸ ë¡œê·¸ì¸ ì¿¼ë¦¬:</strong><br />
                        <code
                          >User.findOne({ email: "admin@company.com", password:
                          "admin123" })</code
                        ><br />
                        <span class="text-muted"
                          >â†’ ì´ë©”ì¼ê³¼ ë¹„ë°€ë²ˆí˜¸ê°€ ì •í™•íˆ ì¼ì¹˜í•˜ëŠ” ì‚¬ìš©ìë§Œ
                          ì°¾ìŒ</span
                        >
                      </div>
                      <div class="mb-2">
                        <strong>ğŸ”´ NoSQL Injection ê³µê²© ì¿¼ë¦¬:</strong><br />
                        <code
                          >User.findOne({ email: "admin@company.com", password:
                          {"$ne": null} })</code
                        ><br />
                        <span class="text-muted"
                          >â†’ <code>$ne: null</code>ì€ "nullì´ ì•„ë‹Œ ëª¨ë“  ê°’"ì„
                          ì˜ë¯¸</span
                        >
                      </div>
                      <div>
                        <strong>âš ï¸ ê²°ê³¼:</strong> ë¹„ë°€ë²ˆí˜¸ê°€ nullì´ ì•„ë‹Œ ëª¨ë“ 
                        ì‚¬ìš©ìê°€ ë§¤ì¹­ë˜ì–´ <strong>ì¸ì¦ ìš°íšŒ ì„±ê³µ!</strong>
                      </div>
                    </div>
                  </div>

                  <!-- MongoDB ì—°ì‚°ì ì„¤ëª… -->
                  <div class="mb-3 p-2 bg-secondary bg-opacity-10 rounded">
                    <h6 class="small">
                      <i class="bi bi-database"></i> ì£¼ìš” MongoDB ì—°ì‚°ì (ê³µê²©ì—
                      ì‚¬ìš©)
                    </h6>
                    <div class="small">
                      <ul class="mb-0" style="padding-left: 20px">
                        <li><code>{"$ne": null}</code> - nullì´ ì•„ë‹Œ ê°’</li>
                        <li><code>{"$gt": ""}</code> - ë¹ˆ ë¬¸ìì—´ë³´ë‹¤ í° ê°’</li>
                        <li>
                          <code>{"$regex": ".*"}</code> - ëª¨ë“  ë¬¸ìì—´ê³¼ ë§¤ì¹­
                        </li>
                        <li>
                          <code>{"$exists": true}</code> - í•„ë“œê°€ ì¡´ì¬í•˜ëŠ” ê²½ìš°
                        </li>
                      </ul>
                    </div>
                  </div>

                  <!-- ì‹¤ìŠµ ë°©ë²• -->
                  <div class="mb-3">
                    <h6 class="small text-danger">
                      <i class="bi bi-bug-fill"></i> í…ŒìŠ¤íŠ¸
                    </h6>

                    <!-- ê°œë°œì ë„êµ¬ ë°©ë²• -->
                    <div class="mb-3">
                      <strong class="small"
                        >ë°©ë²• 1: ê°œë°œì ë„êµ¬ (F12 â†’ Console)</strong
                      >
                      <div
                        class="p-2 bg-dark text-light rounded mt-1"
                        style="font-family: monospace; font-size: 11px"
                      >
                        <div
                          class="d-flex justify-content-between align-items-center mb-1"
                        >
                          <span class="text-muted"
                            >ë³µì‚¬í•´ì„œ ì½˜ì†”ì— ë¶™ì—¬ë„£ê¸°:</span
                          >
                          <button
                            class="btn btn-sm btn-outline-light"
                            onclick="copyCode()"
                          >
                            ğŸ“‹ ë³µì‚¬
                          </button>
                        </div>
                        <pre id="nosql-code" class="mb-0">
fetch('/api/login', {
method: 'POST',
headers: {'Content-Type': 'application/json'},
body: JSON.stringify({
email: 'admin@company.com', 
password: {"$ne": null}
})
}).then(r => r.json()).then(result => {
console.log('ğŸš¨ NoSQL Injection ê²°ê³¼:', result);
if(result.user) {
localStorage.setItem('userData', JSON.stringify(result.user));
console.log('ğŸ”„ 3ì´ˆ í›„ ë©”ì¸ í˜ì´ì§€ë¡œ ì´ë™...');
setTimeout(() => window.location.href = 'index.html', 3000);
}
});</pre
                        >
                      </div>
                    </div>

                    <!-- ë²„íŠ¼ ë°©ë²• -->
                    <div class="mb-3">
                      <strong class="small">ë°©ë²• 2: ì›í´ë¦­ í…ŒìŠ¤íŠ¸</strong><br />
                      <button
                        type="button"
                        class="btn btn-sm btn-danger mt-1"
                        onclick="testNoSQLInjection()"
                      >
                        ğŸš¨ NoSQL Injection ê³µê²© ì‹¤í–‰
                      </button>
                    </div>
                  </div>

                  <!-- ë°©ì–´ ë°©ë²• -->
                  <div class="p-2 bg-success bg-opacity-10 rounded">
                    <h6 class="small text-success">
                      <i class="bi bi-shield-check"></i> ë°©ì–´ ë°©ë²•
                    </h6>
                    <div class="small">
                      <ul class="mb-0" style="padding-left: 20px">
                        <li>
                          <strong>ì…ë ¥ê°’ ê²€ì¦:</strong> ì‚¬ìš©ì ì…ë ¥ì´ ì˜ˆìƒëœ
                          íƒ€ì…ì¸ì§€ í™•ì¸
                        </li>
                        <li>
                          <strong>í™”ì´íŠ¸ë¦¬ìŠ¤íŠ¸ ë°©ì‹:</strong> í—ˆìš©ëœ ë¬¸ìë§Œ
                          ë°›ì•„ë“¤ì´ê¸°
                        </li>
                        <li>
                          <strong>Mongoose Validation:</strong> ìŠ¤í‚¤ë§ˆ ë ˆë²¨ì—ì„œ
                          íƒ€ì… ê²€ì¦
                        </li>
                        <li>
                          <strong>ë¹„ë°€ë²ˆí˜¸ í•´ì‹±:</strong> bcrypt ë“±ì„ ì‚¬ìš©í•œ
                          ì•ˆì „í•œ ì €ì¥
                        </li>
                      </ul>
                    </div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- í‘¸í„° -->
    <footer class="footer">
      <div class="container text-center">
        <p class="mb-0">
          &copy; 2025 WorkBoard Security Demo - OWASP ì·¨ì•½ì  í•™ìŠµ í”„ë¡œì íŠ¸
        </p>
      </div>
    </footer>

    <!-- Bootstrap JS -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.1.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="js/login.js"></script>
  </body>
</html>
